import socketio
import requests

# # Socket.IO 클라이언트 생성
# sio = socketio.Client()
#
# result = {
#     "landmarks": [[{'x': 0.5927601456642151, 'y': 0.9861617088317871, 'z': 5.241136591394024e-07}, {'x': 0.5155649781227112, 'y': 0.9443425536155701, 'z': -0.02644294686615467}, {'x': 0.4653223156929016, 'y': 0.8654327988624573, 'z': -0.05608806386590004}, {'x': 0.4283157289028168, 'y': 0.8055499792098999, 'z': -0.08550803363323212}, {'x': 0.3879893720149994, 'y': 0.7522481679916382, 'z': -0.11727960407733917}, {'x': 0.5201188921928406, 'y': 0.7134290337562561, 'z': -0.0607912577688694}, {'x': 0.4643537402153015, 'y': 0.6126284599304199, 'z': -0.11317681521177292}, {'x': 0.40943068265914917, 'y': 0.5712025165557861, 'z': -0.1540045291185379}, {'x': 0.35416293144226074, 'y': 0.5523128509521484, 'z': -0.1807226538658142}, {'x': 0.5629892349243164, 'y': 0.7103217840194702, 'z': -0.08040456473827362}, {'x': 0.5413597822189331, 'y': 0.5705279111862183, 'z': -0.1297880858182907}, {'x': 0.4860770106315613, 'y': 0.5005118250846863, 'z': -0.166713148355484}, {'x': 0.42599019408226013, 'y': 0.4596896767616272, 'z': -0.19132985174655914}, {'x': 0.6062142848968506, 'y': 0.7376664876937866, 'z': -0.10296988487243652}, {'x': 0.6074603199958801, 'y': 0.5974946022033691, 'z': -0.14850078523159027}, {'x': 0.5631113648414612, 'y': 0.5269138813018799, 'z': -0.1770201474428177}, {'x': 0.5126218795776367, 'y': 0.4768882095813751, 'z': -0.19573284685611725}, {'x': 0.6467544436454773, 'y': 0.790822446346283, 'z': -0.1265859156847}, {'x': 0.6644154787063599, 'y': 0.6943660974502563, 'z': -0.16781388223171234}, {'x': 0.6445795297622681, 'y': 0.6323617100715637, 'z': -0.18642652034759521}, {'x': 0.6124258041381836, 'y': 0.5804388523101807, 'z': -0.198034405708313}],
#                 [{'x': 0.19248434901237488, 'y': 1.1097540855407715, 'z': 6.681350441795075e-07}, {'x': 0.2783002257347107, 'y': 1.0505576133728027, 'z': -0.03449355438351631}, {'x': 0.3402406573295593, 'y': 0.9515190720558167, 'z': -0.05266229063272476}, {'x': 0.3675280511379242, 'y': 0.858670711517334, 'z': -0.06854456663131714}, {'x': 0.38749271631240845, 'y': 0.7678257822990417, 'z': -0.08708208799362183}, {'x': 0.2668186128139496, 'y': 0.8393048048019409, 'z': -0.05674349516630173}, {'x': 0.2830912470817566, 'y': 0.7137707471847534, 'z': -0.09529367089271545}, {'x': 0.30522269010543823, 'y': 0.6548000574111938, 'z': -0.12243613600730896}, {'x': 0.3318330645561218, 'y': 0.6092461347579956, 'z': -0.1423996239900589}, {'x': 0.20551344752311707, 'y': 0.8441810607910156, 'z': -0.06613518297672272}, {'x': 0.19969668984413147, 'y': 0.7094354033470154, 'z': -0.10935661196708679}, {'x': 0.21733810007572174, 'y': 0.6331965923309326, 'z': -0.14348138868808746}, {'x': 0.2427501529455185, 'y': 0.5719804763793945, 'z': -0.16865700483322144}, {'x': 0.14677613973617554, 'y': 0.8773866891860962, 'z': -0.0788705050945282}, {'x': 0.13092710077762604, 'y': 0.7560811638832092, 'z': -0.12577977776527405}, {'x': 0.1328216791152954, 'y': 0.6705409288406372, 'z': -0.15626588463783264}, {'x': 0.1460469663143158, 'y': 0.5936620235443115, 'z': -0.1756393015384674}, {'x': 0.09486538171768188, 'y': 0.9295968413352966, 'z': -0.09288428723812103}, {'x': 0.07266755402088165, 'y': 0.8357580304145813, 'z': -0.13758084177970886}, {'x': 0.06587590277194977, 'y': 0.7697023749351501, 'z': -0.16010122001171112}, {'x': 0.0674748569726944, 'y': 0.7033976912498474, 'z': -0.17436087131500244}]],
#     "worldLandmarks": [[{'x': 0.0168120339512825, 'y': 0.08073188364505768, 'z': 0.038787841796875}, {'x': -0.015613306313753128, 'y': 0.058996785432100296, 'z': 0.035491943359375}, {'x': -0.03416483476758003, 'y': 0.04243560880422592, 'z': 0.02740478515625}, {'x': -0.05343932658433914, 'y': 0.024260375648736954, 'z': 0.0039215087890625}, {'x': -0.06631316989660263, 'y': 0.007138203829526901, 'z': -0.01190948486328125}, {'x': -0.025432292371988297, 'y': 0.000542663037776947, 'z': 0.0145111083984375}, {'x': -0.038771651685237885, 'y': -0.023184463381767273, 'z': 0.0095367431640625}, {'x': -0.05900254845619202, 'y': -0.03686390817165375, 'z': 0.0022029876708984375}, {'x': -0.08215618133544922, 'y': -0.034547578543424606, 'z': -0.0182342529296875}, {'x': -0.002693770220503211, 'y': -0.004295106045901775, 'z': 0.004634857177734375}, {'x': -0.010880673304200172, 'y': -0.03419779986143112, 'z': -0.00615692138671875}, {'x': -0.03455349802970886, 'y': -0.05293794348835945, 'z': -0.0213775634765625}, {'x': -0.060993194580078125, 'y': -0.06758862733840942, 'z': -0.031646728515625}, {'x': 0.016582876443862915, 'y': -0.0009213285520672798, 'z': -0.0100555419921875}, {'x': 0.01215041521936655, 'y': -0.02764149196445942, 'z': -0.0178070068359375}, {'x': -0.001322876662015915, 'y': -0.04704081639647484, 'z': -0.032867431640625}, {'x': -0.02541292831301689, 'y': -0.06330502033233643, 'z': -0.05010986328125}, {'x': 0.025980297476053238, 'y': 0.016993945464491844, 'z': -0.02099609375}, {'x': 0.03115466982126236, 'y': -0.0030933357775211334, 'z': -0.0281524658203125}, {'x': 0.02613370679318905, 'y': -0.01893704943358898, 'z': -0.040802001953125}, {'x': 0.007877405732870102, 'y': -0.032911162823438644, 'z': -0.057647705078125}],
#                        [{'x': -0.009463643655180931, 'y': 0.06928351521492004, 'z': 0.03924560546875}, {'x': 0.01640494540333748, 'y': 0.049044132232666016, 'z': 0.0307464599609375}, {'x': 0.041969601064920425, 'y': 0.028879903256893158, 'z': 0.0165863037109375}, {'x': 0.05608958750963211, 'y': 0.003611478954553604, 'z': 0.0019321441650390625}, {'x': 0.06297467648983002, 'y': -0.019959891214966774, 'z': -0.01244354248046875}, {'x': 0.022124262526631355, 'y': -0.0072855171747505665, 'z': 0.006381988525390625}, {'x': 0.031576596200466156, 'y': -0.031592048704624176, 'z': -0.00460052490234375}, {'x': 0.03672323748469353, 'y': -0.04839358851313591, 'z': -0.00861358642578125}, {'x': 0.047166746109724045, 'y': -0.05735117197036743, 'z': -0.0236663818359375}, {'x': -0.00034585711546242237, 'y': -0.005228294525295496, 'z': 0.0036334991455078125}, {'x': 0.005826570093631744, 'y': -0.03742055967450142, 'z': -0.01092529296875}, {'x': 0.008958956226706505, 'y': -0.05621833726763725, 'z': -0.023834228515625}, {'x': 0.018140073865652084, 'y': -0.07478892058134079, 'z': -0.03631591796875}, {'x': -0.014736556448042393, 'y': 0.002869826275855303, 'z': -0.004650115966796875}, {'x': -0.016797270625829697, 'y': -0.03057073801755905, 'z': -0.0135345458984375}, {'x': -0.013860372826457024, 'y': -0.04790525510907173, 'z': -0.0229949951171875}, {'x': -0.01116880401968956, 'y': -0.06677405536174774, 'z': -0.032867431640625}, {'x': -0.03288675472140312, 'y': 0.015436405315995216, 'z': -0.00647735595703125}, {'x': -0.0359199084341526, 'y': -0.006387623026967049, 'z': -0.00907135009765625}, {'x': -0.03714560344815254, 'y': -0.023055199533700943, 'z': -0.015869140625}, {'x': -0.03588368743658066, 'y': -0.04073815792798996, 'z': -0.023345947265625}]],
#     "handedness": [
#         [
#             {
#                 "score": 0.9788055419921875,
#                 "index": 1,
#                 "categoryName": "Left",
#                 "displayName": "Left"
#             }
#         ],
#         [
#             {
#                 "score": 0.8720703125,
#                 "index": 0,
#                 "categoryName": "Right",
#                 "displayName": "Right"
#             }
#         ]
#     ]
# }
#
# landmarks = result["landmarks"]
#
# # 서버 연결 시 호출
# @sio.event
# def connect():
#     print("서버에 연결되었습니다.")
#
# # 'prediction_result' 이벤트로 예측 결과 수신
# @sio.on('prediction_result')
# def on_prediction_result(data):
#     print("예측 결과:", data)
#
# # 에러 발생 시 에러 수신
# @sio.on('error')
# def on_error(data):
#     print("에러:", data)
#
# # 서버 연결 해제 시 호출
# @sio.event
# def disconnect():
#     print("서버와 연결이 끊어졌습니다.")
#
# # 'predict' 이벤트로 테스트 데이터 전송
# def test_predict_event():
#     print("테스트 데이터 전송:", landmarks)
#     while(1):
#         c = input()
#         sio.emit('predict', landmarks)  # 서버에 predict 이벤트 전송
#         if(c=='.'):
#             break
#
# # 서버 연결 및 테스트 실행
# sio.connect('http://localhost:5001')  # 서버 주소와 포트 설정
# test_predict_event()
# sio.wait()  # 서버의 응답을 계속 기다림
#


#GPT test
server_url = 'http://127.0.0.1:5001/makeSentence1'

data = {'prediction': ['안녕하세요', '목', '아프다', '오다']}

# 데이터 전송
response = requests.post(server_url, json=data)

# 응답 출력
if response.status_code == 200:
    print(response.json())
else:
    print(f"Error: {response.status_code}, {response.text}")